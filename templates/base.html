<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{% block title %}Gulango Guerreiro{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'MedievalSharp', cursive; margin: 0; padding: 0; }
        .notification-box { position: fixed; top: 10px; right: 10px; cursor: pointer; z-index: 1001; }
        .notification-box img { width: 32px; height: 32px; }
        .notification-count { position: absolute; top: -5px; right: -5px; background: #c00; color: #fff; border-radius: 50%; padding: 2px 6px; font-size: 12px; }
        .notification-panel { display: none; position: fixed; top: 50px; right: 10px; width: 250px; background: url('https://cdn.pixabay.com/photo/2017/10/26/09/52/wood-2894986_1280.jpg'); background-size: cover; border: 4px solid #8b6f47; padding: 10px; z-index: 1000; }
        .notification-panel.show { display: block; }
        .notification-item { background: url('https://cdn.pixabay.com/photo/2012/12/13/13/00/parchment-69541_960_720.png'); background-size: cover; border: 2px solid #8b6f47; margin-bottom: 8px; padding: 5px; }
    </style>
</head>
<body>
    <div class="notification-box" onclick="toggleNotifications(); playSound();">
        <img src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png" alt="Notificações">
        <span class="notification-count">{{ notificacoes_nao_lidas }}</span>
    </div>
    <div id="notification-panel" class="notification-panel">
        {% for n in notificacoes_recentes %}
            <div class="notification-item">
                <strong>{{ n.titulo }}</strong><br>
                <span>{{ n.mensagem }}</span>
            </div>
        {% empty %}
            <p>Sem notificações.</p>
        {% endfor %}
    </div>
    <audio id="notification-sound" preload="auto">
        <source src="https://raw.githubusercontent.com/mdn/learning-area/main/html/multimedia-and-embedding/video-and-audio-content/viper.mp3" type="audio/mpeg">
    </audio>
    {% block content %}{% endblock %}
    <script>
        function toggleNotifications() {
            var panel = document.getElementById('notification-panel');
            if (panel.classList.contains('show')) {
                panel.classList.remove('show');
            } else {
                panel.classList.add('show');
            }
        }
        function playSound() {
            var audio = document.getElementById('notification-sound');
            if (audio) { audio.play(); }
        }
    </script>
</body>
</html>
